{
  "address": "0xaD87faeeC6387250abD265941F2a99f2FFCb3199",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_aave",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_compound",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_uniswap",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_spendPermissionManager",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "agent",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "AgentPaymentExecuted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "planId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "DepositExecuted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "oldAddress",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "newAddress",
          "type": "address"
        }
      ],
      "name": "ExpertAgentAddressUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "protocol",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "FundsAllocated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "planId",
          "type": "uint256"
        }
      ],
      "name": "PlanCancelled",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "planId",
          "type": "uint256"
        }
      ],
      "name": "PlanPaused",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "planId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint8",
          "name": "aavePercent",
          "type": "uint8"
        },
        {
          "indexed": false,
          "internalType": "uint8",
          "name": "compoundPercent",
          "type": "uint8"
        },
        {
          "indexed": false,
          "internalType": "uint8",
          "name": "uniswapPercent",
          "type": "uint8"
        }
      ],
      "name": "PlanRebalanced",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "planId",
          "type": "uint256"
        }
      ],
      "name": "PlanResumed",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "planId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "monthlyAmount",
          "type": "uint256"
        }
      ],
      "name": "SIPCreated",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "NATIVE_ETH",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "USDC",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "aave",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "planId",
          "type": "uint256"
        }
      ],
      "name": "cancelPlan",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "compound",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "planId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "monthlyAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint8",
          "name": "aavePercent",
          "type": "uint8"
        },
        {
          "internalType": "uint8",
          "name": "compoundPercent",
          "type": "uint8"
        },
        {
          "internalType": "uint8",
          "name": "uniswapPercent",
          "type": "uint8"
        },
        {
          "internalType": "bool",
          "name": "enableRebalancing",
          "type": "bool"
        }
      ],
      "name": "createSIPPlan",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "planId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "monthlyAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint8",
          "name": "aavePercent",
          "type": "uint8"
        },
        {
          "internalType": "uint8",
          "name": "compoundPercent",
          "type": "uint8"
        },
        {
          "internalType": "uint8",
          "name": "uniswapPercent",
          "type": "uint8"
        }
      ],
      "name": "createSIPPlan",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "planId",
          "type": "uint256"
        }
      ],
      "name": "depositDirect",
      "outputs": [],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "planId",
          "type": "uint256"
        },
        {
          "components": [
            {
              "internalType": "address",
              "name": "account",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "spender",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "token",
              "type": "address"
            },
            {
              "internalType": "uint160",
              "name": "allowance",
              "type": "uint160"
            },
            {
              "internalType": "uint48",
              "name": "period",
              "type": "uint48"
            },
            {
              "internalType": "uint48",
              "name": "start",
              "type": "uint48"
            },
            {
              "internalType": "uint48",
              "name": "end",
              "type": "uint48"
            },
            {
              "internalType": "uint256",
              "name": "salt",
              "type": "uint256"
            },
            {
              "internalType": "bytes",
              "name": "extraData",
              "type": "bytes"
            }
          ],
          "internalType": "struct ISpendPermissionManager.SpendPermission",
          "name": "spendPermission",
          "type": "tuple"
        },
        {
          "internalType": "bytes",
          "name": "signature",
          "type": "bytes"
        },
        {
          "internalType": "uint160",
          "name": "amount",
          "type": "uint160"
        }
      ],
      "name": "executeDeposit",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "planId",
          "type": "uint256"
        },
        {
          "components": [
            {
              "internalType": "address",
              "name": "account",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "spender",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "token",
              "type": "address"
            },
            {
              "internalType": "uint160",
              "name": "allowance",
              "type": "uint160"
            },
            {
              "internalType": "uint48",
              "name": "period",
              "type": "uint48"
            },
            {
              "internalType": "uint48",
              "name": "start",
              "type": "uint48"
            },
            {
              "internalType": "uint48",
              "name": "end",
              "type": "uint48"
            },
            {
              "internalType": "uint256",
              "name": "salt",
              "type": "uint256"
            },
            {
              "internalType": "bytes",
              "name": "extraData",
              "type": "bytes"
            }
          ],
          "internalType": "struct ISpendPermissionManager.SpendPermission",
          "name": "spendPermission",
          "type": "tuple"
        },
        {
          "internalType": "bytes",
          "name": "signature",
          "type": "bytes"
        },
        {
          "internalType": "uint160",
          "name": "amount",
          "type": "uint160"
        }
      ],
      "name": "executeDepositUSDC",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "expertAgentAddress",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "planId",
          "type": "uint256"
        }
      ],
      "name": "getPlan",
      "outputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "user",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "planId",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "monthlyAmount",
              "type": "uint256"
            },
            {
              "components": [
                {
                  "internalType": "uint8",
                  "name": "aavePercent",
                  "type": "uint8"
                },
                {
                  "internalType": "uint8",
                  "name": "compoundPercent",
                  "type": "uint8"
                },
                {
                  "internalType": "uint8",
                  "name": "uniswapPercent",
                  "type": "uint8"
                }
              ],
              "internalType": "struct LumoContract.Strategy",
              "name": "strategy",
              "type": "tuple"
            },
            {
              "internalType": "uint256",
              "name": "totalDeposited",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "lastDepositTime",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "createdAt",
              "type": "uint256"
            },
            {
              "internalType": "bool",
              "name": "active",
              "type": "bool"
            },
            {
              "internalType": "bool",
              "name": "rebalancingEnabled",
              "type": "bool"
            }
          ],
          "internalType": "struct LumoContract.SIPPlan",
          "name": "",
          "type": "tuple"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "getUserPlanIds",
      "outputs": [
        {
          "internalType": "uint256[]",
          "name": "",
          "type": "uint256[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "planId",
          "type": "uint256"
        }
      ],
      "name": "pausePlan",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "planId",
          "type": "uint256"
        },
        {
          "internalType": "uint8",
          "name": "newAavePercent",
          "type": "uint8"
        },
        {
          "internalType": "uint8",
          "name": "newCompoundPercent",
          "type": "uint8"
        },
        {
          "internalType": "uint8",
          "name": "newUniswapPercent",
          "type": "uint8"
        }
      ],
      "name": "rebalance",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "planId",
          "type": "uint256"
        }
      ],
      "name": "resumePlan",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_expertAgentAddress",
          "type": "address"
        }
      ],
      "name": "setExpertAgentAddress",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "planId",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "enabled",
          "type": "bool"
        }
      ],
      "name": "setRebalancing",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_spendPermissionManager",
          "type": "address"
        }
      ],
      "name": "setSpendPermissionManager",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "spendPermissionManager",
      "outputs": [
        {
          "internalType": "contract ISpendPermissionManager",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "transferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "uniswap",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "userPlanIds",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "userPlans",
      "outputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "planId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "monthlyAmount",
          "type": "uint256"
        },
        {
          "components": [
            {
              "internalType": "uint8",
              "name": "aavePercent",
              "type": "uint8"
            },
            {
              "internalType": "uint8",
              "name": "compoundPercent",
              "type": "uint8"
            },
            {
              "internalType": "uint8",
              "name": "uniswapPercent",
              "type": "uint8"
            }
          ],
          "internalType": "struct LumoContract.Strategy",
          "name": "strategy",
          "type": "tuple"
        },
        {
          "internalType": "uint256",
          "name": "totalDeposited",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "lastDepositTime",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "createdAt",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "active",
          "type": "bool"
        },
        {
          "internalType": "bool",
          "name": "rebalancingEnabled",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "stateMutability": "payable",
      "type": "receive"
    }
  ],
  "transactionHash": "0x554c36d6da326c9be174f45271ae446c733b6e9868b316cc7c7bc0cd2a3d44b2",
  "receipt": {
    "to": null,
    "from": "0x66330597bD0a67B970CF32F003a70444CEB27c34",
    "contractAddress": "0xaD87faeeC6387250abD265941F2a99f2FFCb3199",
    "transactionIndex": 23,
    "gasUsed": "2430089",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0xabeb8ab1b81b72bed36d71279320ec44f3e25ce034eab15e6aade003ad0ce7d4",
    "transactionHash": "0x554c36d6da326c9be174f45271ae446c733b6e9868b316cc7c7bc0cd2a3d44b2",
    "logs": [],
    "blockNumber": 35364352,
    "cumulativeGasUsed": "17180693",
    "status": 1,
    "byzantium": true
  },
  "args": [
    "0xF2182c3A96C755E07205B49C2C7B12e6db1f21F9",
    "0x6f42dC74Cc3e75DcAE41aC8690738c86cD503923",
    "0x3598e6e6b02adfd911EB830De01D23aF083AF1A1",
    "0xf85210B21cC50302F477BA56686d2019dC9b67Ad"
  ],
  "numDeployments": 3,
  "solcInputHash": "7de17a04cd1318672740800099651d76",
  "metadata": "{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_aave\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_compound\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_uniswap\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_spendPermissionManager\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"agent\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"AgentPaymentExecuted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"planId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"DepositExecuted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"oldAddress\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newAddress\",\"type\":\"address\"}],\"name\":\"ExpertAgentAddressUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"protocol\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"FundsAllocated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"planId\",\"type\":\"uint256\"}],\"name\":\"PlanCancelled\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"planId\",\"type\":\"uint256\"}],\"name\":\"PlanPaused\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"planId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint8\",\"name\":\"aavePercent\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"uint8\",\"name\":\"compoundPercent\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"uint8\",\"name\":\"uniswapPercent\",\"type\":\"uint8\"}],\"name\":\"PlanRebalanced\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"planId\",\"type\":\"uint256\"}],\"name\":\"PlanResumed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"planId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"monthlyAmount\",\"type\":\"uint256\"}],\"name\":\"SIPCreated\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"NATIVE_ETH\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"USDC\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"aave\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"planId\",\"type\":\"uint256\"}],\"name\":\"cancelPlan\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"compound\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"planId\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"monthlyAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint8\",\"name\":\"aavePercent\",\"type\":\"uint8\"},{\"internalType\":\"uint8\",\"name\":\"compoundPercent\",\"type\":\"uint8\"},{\"internalType\":\"uint8\",\"name\":\"uniswapPercent\",\"type\":\"uint8\"},{\"internalType\":\"bool\",\"name\":\"enableRebalancing\",\"type\":\"bool\"}],\"name\":\"createSIPPlan\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"planId\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"monthlyAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint8\",\"name\":\"aavePercent\",\"type\":\"uint8\"},{\"internalType\":\"uint8\",\"name\":\"compoundPercent\",\"type\":\"uint8\"},{\"internalType\":\"uint8\",\"name\":\"uniswapPercent\",\"type\":\"uint8\"}],\"name\":\"createSIPPlan\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"planId\",\"type\":\"uint256\"}],\"name\":\"depositDirect\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"planId\",\"type\":\"uint256\"},{\"components\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint160\",\"name\":\"allowance\",\"type\":\"uint160\"},{\"internalType\":\"uint48\",\"name\":\"period\",\"type\":\"uint48\"},{\"internalType\":\"uint48\",\"name\":\"start\",\"type\":\"uint48\"},{\"internalType\":\"uint48\",\"name\":\"end\",\"type\":\"uint48\"},{\"internalType\":\"uint256\",\"name\":\"salt\",\"type\":\"uint256\"},{\"internalType\":\"bytes\",\"name\":\"extraData\",\"type\":\"bytes\"}],\"internalType\":\"struct ISpendPermissionManager.SpendPermission\",\"name\":\"spendPermission\",\"type\":\"tuple\"},{\"internalType\":\"bytes\",\"name\":\"signature\",\"type\":\"bytes\"},{\"internalType\":\"uint160\",\"name\":\"amount\",\"type\":\"uint160\"}],\"name\":\"executeDeposit\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"planId\",\"type\":\"uint256\"},{\"components\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint160\",\"name\":\"allowance\",\"type\":\"uint160\"},{\"internalType\":\"uint48\",\"name\":\"period\",\"type\":\"uint48\"},{\"internalType\":\"uint48\",\"name\":\"start\",\"type\":\"uint48\"},{\"internalType\":\"uint48\",\"name\":\"end\",\"type\":\"uint48\"},{\"internalType\":\"uint256\",\"name\":\"salt\",\"type\":\"uint256\"},{\"internalType\":\"bytes\",\"name\":\"extraData\",\"type\":\"bytes\"}],\"internalType\":\"struct ISpendPermissionManager.SpendPermission\",\"name\":\"spendPermission\",\"type\":\"tuple\"},{\"internalType\":\"bytes\",\"name\":\"signature\",\"type\":\"bytes\"},{\"internalType\":\"uint160\",\"name\":\"amount\",\"type\":\"uint160\"}],\"name\":\"executeDepositUSDC\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"expertAgentAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"planId\",\"type\":\"uint256\"}],\"name\":\"getPlan\",\"outputs\":[{\"components\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"planId\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"monthlyAmount\",\"type\":\"uint256\"},{\"components\":[{\"internalType\":\"uint8\",\"name\":\"aavePercent\",\"type\":\"uint8\"},{\"internalType\":\"uint8\",\"name\":\"compoundPercent\",\"type\":\"uint8\"},{\"internalType\":\"uint8\",\"name\":\"uniswapPercent\",\"type\":\"uint8\"}],\"internalType\":\"struct LumoContract.Strategy\",\"name\":\"strategy\",\"type\":\"tuple\"},{\"internalType\":\"uint256\",\"name\":\"totalDeposited\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lastDepositTime\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"createdAt\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"active\",\"type\":\"bool\"},{\"internalType\":\"bool\",\"name\":\"rebalancingEnabled\",\"type\":\"bool\"}],\"internalType\":\"struct LumoContract.SIPPlan\",\"name\":\"\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"}],\"name\":\"getUserPlanIds\",\"outputs\":[{\"internalType\":\"uint256[]\",\"name\":\"\",\"type\":\"uint256[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"planId\",\"type\":\"uint256\"}],\"name\":\"pausePlan\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"planId\",\"type\":\"uint256\"},{\"internalType\":\"uint8\",\"name\":\"newAavePercent\",\"type\":\"uint8\"},{\"internalType\":\"uint8\",\"name\":\"newCompoundPercent\",\"type\":\"uint8\"},{\"internalType\":\"uint8\",\"name\":\"newUniswapPercent\",\"type\":\"uint8\"}],\"name\":\"rebalance\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"planId\",\"type\":\"uint256\"}],\"name\":\"resumePlan\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_expertAgentAddress\",\"type\":\"address\"}],\"name\":\"setExpertAgentAddress\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"planId\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"enabled\",\"type\":\"bool\"}],\"name\":\"setRebalancing\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_spendPermissionManager\",\"type\":\"address\"}],\"name\":\"setSpendPermissionManager\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"spendPermissionManager\",\"outputs\":[{\"internalType\":\"contract ISpendPermissionManager\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"uniswap\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"userPlanIds\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"userPlans\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"planId\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"monthlyAmount\",\"type\":\"uint256\"},{\"components\":[{\"internalType\":\"uint8\",\"name\":\"aavePercent\",\"type\":\"uint8\"},{\"internalType\":\"uint8\",\"name\":\"compoundPercent\",\"type\":\"uint8\"},{\"internalType\":\"uint8\",\"name\":\"uniswapPercent\",\"type\":\"uint8\"}],\"internalType\":\"struct LumoContract.Strategy\",\"name\":\"strategy\",\"type\":\"tuple\"},{\"internalType\":\"uint256\",\"name\":\"totalDeposited\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lastDepositTime\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"createdAt\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"active\",\"type\":\"bool\"},{\"internalType\":\"bool\",\"name\":\"rebalancingEnabled\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"stateMutability\":\"payable\",\"type\":\"receive\"}],\"devdoc\":{\"details\":\"Uses Coinbase's SpendPermissionManager for automated USDC deposits      SIP investments use USDC, Agent payments use ETH\",\"kind\":\"dev\",\"methods\":{\"createSIPPlan(uint256,uint256,uint8,uint8,uint8,bool)\":{\"details\":\"This is called by the frontend when user confirms their plan\",\"params\":{\"aavePercent\":\"Percentage allocation to Aave\",\"compoundPercent\":\"Percentage allocation to Compound\",\"enableRebalancing\":\"Whether to enable AI rebalancing\",\"monthlyAmount\":\"Monthly investment amount in USDC (6 decimals)\",\"planId\":\"The database plan ID for reference\",\"uniswapPercent\":\"Percentage allocation to Uniswap\"}},\"depositDirect(uint256)\":{\"details\":\"Alternative method for direct deposits without spend permissions\",\"params\":{\"planId\":\"The plan ID to fund\"}},\"executeDeposit(address,uint256,(address,address,address,uint160,uint48,uint48,uint48,uint256,bytes),bytes,uint160)\":{\"details\":\"Called by the server wallet (spender) using the stored spend permission\"},\"executeDepositUSDC(address,uint256,(address,address,address,uint160,uint48,uint48,uint48,uint256,bytes),bytes,uint160)\":{\"details\":\"Called by the server wallet (spender) using the stored spend permission\",\"params\":{\"amount\":\"Amount to deposit in this execution (USDC, 6 decimals)\",\"planId\":\"The plan ID to execute\",\"signature\":\"The user's signature for the spend permission\",\"spendPermission\":\"The spend permission struct (must be for USDC token)\",\"user\":\"The user whose SIP is being executed\"}},\"rebalance(address,uint256,uint8,uint8,uint8)\":{\"details\":\"Called by the server after AI generates new strategy\",\"params\":{\"newAavePercent\":\"New percentage allocation to Aave\",\"newCompoundPercent\":\"New percentage allocation to Compound\",\"newUniswapPercent\":\"New percentage allocation to Uniswap\",\"planId\":\"The plan ID to rebalance\",\"user\":\"The user whose plan is being rebalanced\"}},\"setRebalancing(uint256,bool)\":{\"params\":{\"enabled\":\"Whether to enable rebalancing\",\"planId\":\"The plan ID\"}}},\"title\":\"LumoContract\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"cancelPlan(uint256)\":{\"notice\":\"Cancel a SIP plan\"},\"createSIPPlan(uint256,uint256,uint8,uint8,uint8)\":{\"notice\":\"Create a new SIP plan (backwards compatible - no rebalancing param)\"},\"createSIPPlan(uint256,uint256,uint8,uint8,uint8,bool)\":{\"notice\":\"Create a new SIP plan for a user\"},\"depositDirect(uint256)\":{\"notice\":\"Execute a direct ETH deposit (for users who send ETH directly)\"},\"executeDeposit(address,uint256,(address,address,address,uint160,uint48,uint48,uint48,uint256,bytes),bytes,uint160)\":{\"notice\":\"Execute a deposit for a user's SIP plan using spend permission (backwards compatible - ETH)\"},\"executeDepositUSDC(address,uint256,(address,address,address,uint160,uint48,uint48,uint48,uint256,bytes),bytes,uint160)\":{\"notice\":\"Execute a USDC deposit for a user's SIP plan using spend permission\"},\"getPlan(address,uint256)\":{\"notice\":\"Get a user's SIP plan\"},\"getUserPlanIds(address)\":{\"notice\":\"Get all plan IDs for a user\"},\"pausePlan(uint256)\":{\"notice\":\"Pause a SIP plan\"},\"rebalance(address,uint256,uint8,uint8,uint8)\":{\"notice\":\"Rebalance a user's SIP plan with new strategy allocation\"},\"resumePlan(uint256)\":{\"notice\":\"Resume a paused SIP plan\"},\"setExpertAgentAddress(address)\":{\"notice\":\"Set the expert agent address for AI payments\"},\"setRebalancing(uint256,bool)\":{\"notice\":\"Toggle rebalancing for a plan\"},\"setSpendPermissionManager(address)\":{\"notice\":\"Update the SpendPermissionManager address\"},\"transferOwnership(address)\":{\"notice\":\"Transfer ownership\"}},\"notice\":\"Main contract for Lumo SIP (Systematic Investment Plan) DeFAI automation\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/LumoContract.sol\":\"LumoContract\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"contracts/LumoContract.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\nimport \\\"./interfaces/ISpendPermissionManager.sol\\\";\\n\\n/**\\n * @title IERC20\\n * @notice Minimal ERC20 interface for token transfers\\n */\\ninterface IERC20 {\\n    function transfer(address to, uint256 amount) external returns (bool);\\n    function transferFrom(address from, address to, uint256 amount) external returns (bool);\\n    function balanceOf(address account) external view returns (uint256);\\n    function approve(address spender, uint256 amount) external returns (bool);\\n}\\n\\n/**\\n * @title LumoContract\\n * @notice Main contract for Lumo SIP (Systematic Investment Plan) DeFAI automation\\n * @dev Uses Coinbase's SpendPermissionManager for automated USDC deposits\\n *      SIP investments use USDC, Agent payments use ETH\\n */\\ncontract LumoContract {\\n    struct Strategy {\\n        uint8 aavePercent;\\n        uint8 compoundPercent;\\n        uint8 uniswapPercent;\\n    }\\n\\n    struct SIPPlan {\\n        address user;\\n        uint256 planId;           // Database plan ID for reference\\n        uint256 monthlyAmount;    // Amount in USDC (6 decimals)\\n        Strategy strategy;\\n        uint256 totalDeposited;\\n        uint256 lastDepositTime;\\n        uint256 createdAt;\\n        bool active;\\n        bool rebalancingEnabled;  // Whether AI rebalancing is enabled\\n    }\\n\\n    // User address => Plan ID => SIPPlan (users can have multiple plans)\\n    mapping(address => mapping(uint256 => SIPPlan)) public userPlans;\\n    // User address => array of plan IDs\\n    mapping(address => uint256[]) public userPlanIds;\\n    \\n    address public aave;\\n    address public compound;\\n    address public uniswap;\\n    address public owner;\\n    \\n    // USDC token address on Base Sepolia\\n    address public constant USDC = 0x036CbD53842c5426634e7929541eC2318f3dCF7e;\\n    \\n    // Native ETH address constant (ERC-7528)\\n    address public constant NATIVE_ETH = 0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE;\\n    \\n    // Expert agent address for AI payments\\n    address public expertAgentAddress;\\n    \\n    // SpendPermissionManager contract address (Base Sepolia)\\n    ISpendPermissionManager public spendPermissionManager;\\n\\n    event SIPCreated(address indexed user, uint256 indexed planId, uint256 monthlyAmount);\\n    event DepositExecuted(address indexed user, uint256 indexed planId, uint256 amount);\\n    event FundsAllocated(address indexed protocol, uint256 amount);\\n    event PlanCancelled(address indexed user, uint256 indexed planId);\\n    event PlanPaused(address indexed user, uint256 indexed planId);\\n    event PlanResumed(address indexed user, uint256 indexed planId);\\n    event PlanRebalanced(address indexed user, uint256 indexed planId, uint8 aavePercent, uint8 compoundPercent, uint8 uniswapPercent);\\n    event AgentPaymentExecuted(address indexed user, address indexed agent, uint256 amount);\\n    event ExpertAgentAddressUpdated(address indexed oldAddress, address indexed newAddress);\\n\\n    modifier onlyOwner() {\\n        require(msg.sender == owner, \\\"Only owner\\\");\\n        _;\\n    }\\n\\n    constructor(\\n        address _aave, \\n        address _compound, \\n        address _uniswap,\\n        address _spendPermissionManager\\n    ) {\\n        aave = _aave;\\n        compound = _compound;\\n        uniswap = _uniswap;\\n        spendPermissionManager = ISpendPermissionManager(_spendPermissionManager);\\n        owner = msg.sender;\\n    }\\n\\n    /**\\n     * @notice Create a new SIP plan for a user\\n     * @dev This is called by the frontend when user confirms their plan\\n     * @param planId The database plan ID for reference\\n     * @param monthlyAmount Monthly investment amount in USDC (6 decimals)\\n     * @param aavePercent Percentage allocation to Aave\\n     * @param compoundPercent Percentage allocation to Compound\\n     * @param uniswapPercent Percentage allocation to Uniswap\\n     * @param enableRebalancing Whether to enable AI rebalancing\\n     */\\n    function createSIPPlan(\\n        uint256 planId,\\n        uint256 monthlyAmount,\\n        uint8 aavePercent,\\n        uint8 compoundPercent,\\n        uint8 uniswapPercent,\\n        bool enableRebalancing\\n    ) external {\\n        require(monthlyAmount > 0, \\\"Monthly amount must be greater than 0\\\");\\n        require(aavePercent + compoundPercent + uniswapPercent == 100, \\\"Percents must sum to 100\\\");\\n        require(userPlans[msg.sender][planId].createdAt == 0, \\\"Plan already exists\\\");\\n\\n        Strategy memory strategy = Strategy({\\n            aavePercent: aavePercent,\\n            compoundPercent: compoundPercent,\\n            uniswapPercent: uniswapPercent\\n        });\\n\\n        userPlans[msg.sender][planId] = SIPPlan({\\n            user: msg.sender,\\n            planId: planId,\\n            monthlyAmount: monthlyAmount,\\n            strategy: strategy,\\n            totalDeposited: 0,\\n            lastDepositTime: 0,\\n            createdAt: block.timestamp,\\n            active: true,\\n            rebalancingEnabled: enableRebalancing\\n        });\\n\\n        userPlanIds[msg.sender].push(planId);\\n\\n        emit SIPCreated(msg.sender, planId, monthlyAmount);\\n    }\\n\\n    /**\\n     * @notice Create a new SIP plan (backwards compatible - no rebalancing param)\\n     */\\n    function createSIPPlan(\\n        uint256 planId,\\n        uint256 monthlyAmount,\\n        uint8 aavePercent,\\n        uint8 compoundPercent,\\n        uint8 uniswapPercent\\n    ) external {\\n        require(monthlyAmount > 0, \\\"Monthly amount must be greater than 0\\\");\\n        require(aavePercent + compoundPercent + uniswapPercent == 100, \\\"Percents must sum to 100\\\");\\n        require(userPlans[msg.sender][planId].createdAt == 0, \\\"Plan already exists\\\");\\n\\n        Strategy memory strategy = Strategy({\\n            aavePercent: aavePercent,\\n            compoundPercent: compoundPercent,\\n            uniswapPercent: uniswapPercent\\n        });\\n\\n        userPlans[msg.sender][planId] = SIPPlan({\\n            user: msg.sender,\\n            planId: planId,\\n            monthlyAmount: monthlyAmount,\\n            strategy: strategy,\\n            totalDeposited: 0,\\n            lastDepositTime: 0,\\n            createdAt: block.timestamp,\\n            active: true,\\n            rebalancingEnabled: false\\n        });\\n\\n        userPlanIds[msg.sender].push(planId);\\n\\n        emit SIPCreated(msg.sender, planId, monthlyAmount);\\n    }\\n\\n    /**\\n     * @notice Execute a USDC deposit for a user's SIP plan using spend permission\\n     * @dev Called by the server wallet (spender) using the stored spend permission\\n     * @param user The user whose SIP is being executed\\n     * @param planId The plan ID to execute\\n     * @param spendPermission The spend permission struct (must be for USDC token)\\n     * @param signature The user's signature for the spend permission\\n     * @param amount Amount to deposit in this execution (USDC, 6 decimals)\\n     */\\n    function executeDepositUSDC(\\n        address user,\\n        uint256 planId,\\n        ISpendPermissionManager.SpendPermission calldata spendPermission,\\n        bytes calldata signature,\\n        uint160 amount\\n    ) external onlyOwner {\\n        SIPPlan storage plan = userPlans[user][planId];\\n        require(plan.active, \\\"No active plan\\\");\\n        require(plan.user == user, \\\"User mismatch\\\");\\n        require(spendPermission.account == user, \\\"Permission account mismatch\\\");\\n        require(spendPermission.spender == msg.sender, \\\"Spender mismatch\\\");\\n        require(spendPermission.token == USDC, \\\"Token must be USDC\\\");\\n\\n        // First, approve the spend permission on-chain if not already approved\\n        if (!spendPermissionManager.isApproved(spendPermission)) {\\n            spendPermissionManager.approveWithSignature(spendPermission, signature);\\n        }\\n\\n        // Execute the spend - this transfers USDC from user to this contract\\n        spendPermissionManager.spend(spendPermission, amount);\\n\\n        // Now allocate the received USDC to protocols\\n        _allocateFundsUSDC(plan, amount);\\n\\n        plan.totalDeposited += amount;\\n        plan.lastDepositTime = block.timestamp;\\n\\n        emit DepositExecuted(user, planId, amount);\\n    }\\n\\n    /**\\n     * @notice Execute a deposit for a user's SIP plan using spend permission (backwards compatible - ETH)\\n     * @dev Called by the server wallet (spender) using the stored spend permission\\n     */\\n    function executeDeposit(\\n        address user,\\n        uint256 planId,\\n        ISpendPermissionManager.SpendPermission calldata spendPermission,\\n        bytes calldata signature,\\n        uint160 amount\\n    ) external onlyOwner {\\n        SIPPlan storage plan = userPlans[user][planId];\\n        require(plan.active, \\\"No active plan\\\");\\n        require(plan.user == user, \\\"User mismatch\\\");\\n        require(spendPermission.account == user, \\\"Permission account mismatch\\\");\\n        require(spendPermission.spender == msg.sender, \\\"Spender mismatch\\\");\\n\\n        // First, approve the spend permission on-chain if not already approved\\n        if (!spendPermissionManager.isApproved(spendPermission)) {\\n            spendPermissionManager.approveWithSignature(spendPermission, signature);\\n        }\\n\\n        // Execute the spend - this transfers tokens from user to this contract\\n        spendPermissionManager.spend(spendPermission, amount);\\n\\n        // Now allocate the received funds to protocols\\n        _allocateFunds(plan, amount);\\n\\n        plan.totalDeposited += amount;\\n        plan.lastDepositTime = block.timestamp;\\n\\n        emit DepositExecuted(user, planId, amount);\\n    }\\n\\n    /**\\n     * @notice Execute a direct ETH deposit (for users who send ETH directly)\\n     * @dev Alternative method for direct deposits without spend permissions\\n     * @param planId The plan ID to fund\\n     */\\n    function depositDirect(uint256 planId) external payable {\\n        SIPPlan storage plan = userPlans[msg.sender][planId];\\n        require(plan.active, \\\"No active plan\\\");\\n        require(msg.value > 0, \\\"Must send ETH\\\");\\n\\n        _allocateFunds(plan, msg.value);\\n\\n        plan.totalDeposited += msg.value;\\n        plan.lastDepositTime = block.timestamp;\\n\\n        emit DepositExecuted(msg.sender, planId, msg.value);\\n    }\\n\\n    /**\\n     * @notice Rebalance a user's SIP plan with new strategy allocation\\n     * @dev Called by the server after AI generates new strategy\\n     * @param user The user whose plan is being rebalanced\\n     * @param planId The plan ID to rebalance\\n     * @param newAavePercent New percentage allocation to Aave\\n     * @param newCompoundPercent New percentage allocation to Compound\\n     * @param newUniswapPercent New percentage allocation to Uniswap\\n     */\\n    function rebalance(\\n        address user,\\n        uint256 planId,\\n        uint8 newAavePercent,\\n        uint8 newCompoundPercent,\\n        uint8 newUniswapPercent\\n    ) external onlyOwner {\\n        SIPPlan storage plan = userPlans[user][planId];\\n        require(plan.active, \\\"No active plan\\\");\\n        require(plan.user == user, \\\"User mismatch\\\");\\n        require(plan.rebalancingEnabled, \\\"Rebalancing not enabled\\\");\\n        require(newAavePercent + newCompoundPercent + newUniswapPercent == 100, \\\"Percents must sum to 100\\\");\\n\\n        plan.strategy.aavePercent = newAavePercent;\\n        plan.strategy.compoundPercent = newCompoundPercent;\\n        plan.strategy.uniswapPercent = newUniswapPercent;\\n\\n        emit PlanRebalanced(user, planId, newAavePercent, newCompoundPercent, newUniswapPercent);\\n    }\\n\\n    /**\\n     * @notice Toggle rebalancing for a plan\\n     * @param planId The plan ID\\n     * @param enabled Whether to enable rebalancing\\n     */\\n    function setRebalancing(uint256 planId, bool enabled) external {\\n        SIPPlan storage plan = userPlans[msg.sender][planId];\\n        require(plan.createdAt > 0, \\\"Plan does not exist\\\");\\n        require(plan.user == msg.sender, \\\"Not plan owner\\\");\\n        \\n        plan.rebalancingEnabled = enabled;\\n    }\\n\\n    /**\\n     * @notice Internal function to allocate USDC funds to protocols based on strategy\\n     */\\n    function _allocateFundsUSDC(SIPPlan storage plan, uint256 amount) internal {\\n        // Calculate amounts for each protocol\\n        uint256 aaveAmount = (amount * plan.strategy.aavePercent) / 100;\\n        uint256 compoundAmount = (amount * plan.strategy.compoundPercent) / 100;\\n        uint256 uniswapAmount = (amount * plan.strategy.uniswapPercent) / 100;\\n\\n        IERC20 usdc = IERC20(USDC);\\n\\n        // Transfer USDC to protocols\\n        if (aaveAmount > 0) {\\n            require(usdc.transfer(aave, aaveAmount), \\\"Aave transfer failed\\\");\\n            emit FundsAllocated(aave, aaveAmount);\\n        }\\n\\n        if (compoundAmount > 0) {\\n            require(usdc.transfer(compound, compoundAmount), \\\"Compound transfer failed\\\");\\n            emit FundsAllocated(compound, compoundAmount);\\n        }\\n\\n        if (uniswapAmount > 0) {\\n            require(usdc.transfer(uniswap, uniswapAmount), \\\"Uniswap transfer failed\\\");\\n            emit FundsAllocated(uniswap, uniswapAmount);\\n        }\\n    }\\n\\n    /**\\n     * @notice Internal function to allocate ETH funds to protocols based on strategy\\n     */\\n    function _allocateFunds(SIPPlan storage plan, uint256 amount) internal {\\n        // Calculate amounts for each protocol\\n        uint256 aaveAmount = (amount * plan.strategy.aavePercent) / 100;\\n        uint256 compoundAmount = (amount * plan.strategy.compoundPercent) / 100;\\n        uint256 uniswapAmount = (amount * plan.strategy.uniswapPercent) / 100;\\n\\n        // Send to mock protocols\\n        if (aaveAmount > 0) {\\n            (bool success1, ) = aave.call{value: aaveAmount}(\\\"\\\");\\n            require(success1, \\\"Aave deposit failed\\\");\\n            emit FundsAllocated(aave, aaveAmount);\\n        }\\n\\n        if (compoundAmount > 0) {\\n            (bool success2, ) = compound.call{value: compoundAmount}(\\\"\\\");\\n            require(success2, \\\"Compound deposit failed\\\");\\n            emit FundsAllocated(compound, compoundAmount);\\n        }\\n\\n        if (uniswapAmount > 0) {\\n            (bool success3, ) = uniswap.call{value: uniswapAmount}(\\\"\\\");\\n            require(success3, \\\"Uniswap deposit failed\\\");\\n            emit FundsAllocated(uniswap, uniswapAmount);\\n        }\\n    }\\n\\n    /**\\n     * @notice Get a user's SIP plan\\n     */\\n    function getPlan(address user, uint256 planId) external view returns (SIPPlan memory) {\\n        return userPlans[user][planId];\\n    }\\n\\n    /**\\n     * @notice Get all plan IDs for a user\\n     */\\n    function getUserPlanIds(address user) external view returns (uint256[] memory) {\\n        return userPlanIds[user];\\n    }\\n\\n    /**\\n     * @notice Cancel a SIP plan\\n     */\\n    function cancelPlan(uint256 planId) external {\\n        SIPPlan storage plan = userPlans[msg.sender][planId];\\n        require(plan.active, \\\"No active plan\\\");\\n        require(plan.user == msg.sender, \\\"Not plan owner\\\");\\n\\n        plan.active = false;\\n        emit PlanCancelled(msg.sender, planId);\\n    }\\n\\n    /**\\n     * @notice Pause a SIP plan\\n     */\\n    function pausePlan(uint256 planId) external {\\n        SIPPlan storage plan = userPlans[msg.sender][planId];\\n        require(plan.active, \\\"No active plan\\\");\\n        require(plan.user == msg.sender, \\\"Not plan owner\\\");\\n        \\n        plan.active = false;\\n        emit PlanPaused(msg.sender, planId);\\n    }\\n\\n    /**\\n     * @notice Resume a paused SIP plan\\n     */\\n    function resumePlan(uint256 planId) external {\\n        SIPPlan storage plan = userPlans[msg.sender][planId];\\n        require(plan.createdAt > 0, \\\"Plan does not exist\\\");\\n        require(plan.user == msg.sender, \\\"Not plan owner\\\");\\n        require(!plan.active, \\\"Plan already active\\\");\\n        \\n        plan.active = true;\\n        emit PlanResumed(msg.sender, planId);\\n    }\\n\\n    /**\\n     * @notice Update the SpendPermissionManager address\\n     */\\n    function setSpendPermissionManager(address _spendPermissionManager) external onlyOwner {\\n        spendPermissionManager = ISpendPermissionManager(_spendPermissionManager);\\n    }\\n\\n    /**\\n     * @notice Set the expert agent address for AI payments\\n     */\\n    function setExpertAgentAddress(address _expertAgentAddress) external onlyOwner {\\n        address oldAddress = expertAgentAddress;\\n        expertAgentAddress = _expertAgentAddress;\\n        emit ExpertAgentAddressUpdated(oldAddress, _expertAgentAddress);\\n    }\\n\\n    /**\\n     * @notice Transfer ownership\\n     */\\n    function transferOwnership(address newOwner) external onlyOwner {\\n        require(newOwner != address(0), \\\"Invalid address\\\");\\n        owner = newOwner;\\n    }\\n\\n    receive() external payable {}\\n}\",\"keccak256\":\"0x327cde8781be62af2947a9dffc5bf824e9fd7eeaffeb62cdbb9b3da96bec4b6e\",\"license\":\"MIT\"},\"contracts/interfaces/ISpendPermissionManager.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.20;\\n\\n/**\\n * @title ISpendPermissionManager\\n * @notice Interface for Coinbase's SpendPermissionManager contract\\n * @dev Deployed on Base Sepolia at 0xf85210B21cC50302F477BA56686d2019dC9b67Ad\\n */\\ninterface ISpendPermissionManager {\\n    /// @notice A spend permission for an external entity to spend an account's tokens.\\n    struct SpendPermission {\\n        address account;      // Smart account this permission is valid for\\n        address spender;      // Entity that can spend account's tokens\\n        address token;        // Token address (ERC-7528 native token or ERC-20)\\n        uint160 allowance;    // Maximum allowed value to spend within each period\\n        uint48 period;        // Time duration for resetting allowance (seconds)\\n        uint48 start;         // Start timestamp (inclusive, unix seconds)\\n        uint48 end;           // End timestamp (exclusive, unix seconds)\\n        uint256 salt;         // Arbitrary data for uniqueness\\n        bytes extraData;      // Arbitrary data for the spender\\n    }\\n\\n    /// @notice Period parameters and spend usage.\\n    struct PeriodSpend {\\n        uint48 start;    // Period start timestamp\\n        uint48 end;      // Period end timestamp\\n        uint160 spend;   // Accumulated spend for the period\\n    }\\n\\n    /// @notice Approve a spend permission via a signature from the account.\\n    /// @param spendPermission Details of the spend permission.\\n    /// @param signature Signed approval from the user.\\n    /// @return approved True if spend permission is approved and not revoked.\\n    function approveWithSignature(\\n        SpendPermission calldata spendPermission,\\n        bytes calldata signature\\n    ) external returns (bool);\\n\\n    /// @notice Spend tokens using a spend permission.\\n    /// @dev Reverts if not called by the spender of the spend permission.\\n    /// @param spendPermission Details of the spend permission.\\n    /// @param value Amount of token attempting to spend.\\n    function spend(SpendPermission memory spendPermission, uint160 value) external;\\n\\n    /// @notice Get if a spend permission is approved.\\n    /// @param spendPermission Details of the spend permission.\\n    /// @return approved True if spend permission is approved.\\n    function isApproved(SpendPermission memory spendPermission) external view returns (bool);\\n\\n    /// @notice Get the unique hash for a spend permission.\\n    /// @param spendPermission Details of the spend permission.\\n    /// @return hash Unique hash.\\n    function getHash(SpendPermission memory spendPermission) external view returns (bytes32);\\n\\n    /// @notice Get the last updated period for a spend permission.\\n    /// @param spendPermission Details of the spend permission.\\n    /// @return lastUpdatedPeriod The last updated period with spend usage.\\n    function getLastUpdatedPeriod(SpendPermission memory spendPermission) external view returns (PeriodSpend memory);\\n}\\n\",\"keccak256\":\"0x0535c7c752e8b2f6d61a720c39c49186f8dbbac12cd67e6bf9f0bf8e7e82fb1b\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x60806040523480156200001157600080fd5b5060405162002a0238038062002a028339810160408190526200003491620000b1565b600280546001600160a01b03199081166001600160a01b039687161790915560038054821694861694909417909355600480548416928516929092179091556007805483169190931617909155600580543392169190911790556200010e565b80516001600160a01b0381168114620000ac57600080fd5b919050565b60008060008060808587031215620000c857600080fd5b620000d38562000094565b9350620000e36020860162000094565b9250620000f36040860162000094565b9150620001036060860162000094565b905092959194509250565b6128e4806200011e6000396000f3fe60806040526004361061016a5760003560e01c806389a30271116100d1578063c0edf9a61161008a578063f1e4d3b211610064578063f1e4d3b21461055c578063f2fde38b1461057c578063f457ae191461059c578063f69e2046146105bc57600080fd5b8063c0edf9a6146104e1578063cff979a614610501578063e4b605401461052f57600080fd5b806389a302711461041957806389ce731a146104415780638da5cb5b1461046157806390840cd514610481578063b35876e7146104a1578063bc1ad7a4146104c157600080fd5b80636752902e116101235780636752902e1461025057806368c2fe991461027057806380d6664c1461029d578063819faf7b146102bd578063831820f0146102dd57806383589fde146103f957600080fd5b8063011e1167146101765780632681f7e4146101bb57806327adf703146101db57806336de6cdf146101fb57806352cd407f1461021d578063538389221461023d57600080fd5b3661017157005b600080fd5b34801561018257600080fd5b5061019e73eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee81565b6040516001600160a01b0390911681526020015b60405180910390f35b3480156101c757600080fd5b5060045461019e906001600160a01b031681565b3480156101e757600080fd5b5060065461019e906001600160a01b031681565b34801561020757600080fd5b5061021b61021636600461217e565b6105dc565b005b34801561022957600080fd5b5061021b6102383660046121d3565b610685565b61021b61024b36600461229f565b6109c1565b34801561025c57600080fd5b5061021b61026b3660046122b8565b610aa1565b34801561027c57600080fd5b5061029061028b3660046122dc565b610b1d565b6040516101b29190612308565b3480156102a957600080fd5b5061021b6102b836600461229f565b610be1565b3480156102c957600080fd5b5060025461019e906001600160a01b031681565b3480156102e957600080fd5b506103856102f83660046122dc565b60006020818152928152604080822084529181528190208054600182015460028301548451606081018652600385015460ff8082168352610100808304821699840199909952620100009091048116968201969096526004850154600586015460068701546007909701546001600160a01b03909616989497939692959194909382811692919091041689565b604080516001600160a01b03909a168a526020808b019990995289810197909752855160ff90811660608b015297860151881660808a0152949095015190951660a087015260c086019190915260e085015261010084019290925215156101208301521515610140820152610160016101b2565b34801561040557600080fd5b5061021b61041436600461229f565b610c83565b34801561042557600080fd5b5061019e73036cbd53842c5426634e7929541ec2318f3dcf7e81565b34801561044d57600080fd5b5061021b61045c3660046121d3565b610d25565b34801561046d57600080fd5b5060055461019e906001600160a01b031681565b34801561048d57600080fd5b5060075461019e906001600160a01b031681565b3480156104ad57600080fd5b5061021b6104bc36600461229f565b61105c565b3480156104cd57600080fd5b5061021b6104dc3660046123bf565b61116f565b3480156104ed57600080fd5b5061021b6104fc36600461241f565b611327565b34801561050d57600080fd5b5061052161051c3660046122dc565b611623565b6040519081526020016101b2565b34801561053b57600080fd5b5061054f61054a3660046122b8565b611654565b6040516101b29190612489565b34801561056857600080fd5b5061021b6105773660046124cd565b6116c0565b34801561058857600080fd5b5061021b6105973660046122b8565b6119bd565b3480156105a857600080fd5b5061021b6105b73660046122b8565b611a51565b3480156105c857600080fd5b5060035461019e906001600160a01b031681565b33600090815260208181526040808320858452909152902060068101546106405760405162461bcd60e51b8152602060048201526013602482015272141b185b88191bd95cc81b9bdd08195e1a5cdd606a1b60448201526064015b60405180910390fd5b80546001600160a01b031633146106695760405162461bcd60e51b8152600401610637906124fc565b60070180549115156101000261ff001990921691909117905550565b6005546001600160a01b031633146106af5760405162461bcd60e51b815260040161063790612524565b6001600160a01b0386166000908152602081815260408083208884529091529020600781015460ff166106f45760405162461bcd60e51b815260040161063790612548565b80546001600160a01b038881169116146107205760405162461bcd60e51b815260040161063790612570565b6001600160a01b03871661073760208701876122b8565b6001600160a01b03161461078d5760405162461bcd60e51b815260206004820152601b60248201527f5065726d697373696f6e206163636f756e74206d69736d6174636800000000006044820152606401610637565b3361079e60408701602088016122b8565b6001600160a01b0316146107e75760405162461bcd60e51b815260206004820152601060248201526f0a6e0cadcc8cae440dad2e6dac2e8c6d60831b6044820152606401610637565b600754604051639e16b82f60e01b81526001600160a01b0390911690639e16b82f9061081790889060040161270d565b602060405180830381865afa158015610834573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108589190612720565b6108d55760075460405163b9ffc8e160e01b81526001600160a01b039091169063b9ffc8e1906108909088908890889060040161273d565b6020604051808303816000875af11580156108af573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108d39190612720565b505b60075460405163415a973560e01b81526001600160a01b039091169063415a973590610907908890869060040161276d565b600060405180830381600087803b15801561092157600080fd5b505af1158015610935573d6000803e3d6000fd5b5050505061094c81836001600160a01b0316611a9d565b816001600160a01b031681600401600082825461096991906127ad565b90915550504260058201556040516001600160a01b0383811682528791908916907fcf75a80a22cde0edcefe708f860e644c73eb8921aac7890f3bec010eef965f64906020015b60405180910390a350505050505050565b336000908152602081815260408083208484529091529020600781015460ff166109fd5760405162461bcd60e51b815260040161063790612548565b60003411610a3d5760405162461bcd60e51b815260206004820152600d60248201526c09aeae6e840e6cadcc8408aa89609b1b6044820152606401610637565b610a478134611a9d565b34816004016000828254610a5b91906127ad565b9091555050426005820155604051348152829033907fcf75a80a22cde0edcefe708f860e644c73eb8921aac7890f3bec010eef965f649060200160405180910390a35050565b6005546001600160a01b03163314610acb5760405162461bcd60e51b815260040161063790612524565b600680546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8afc512c0bdd152ae40fb1548f4014dfaf323edbd91e8397519d5d586c9586bc90600090a35050565b610b256120e9565b506001600160a01b0380831660009081526020818152604080832085845282529182902082516101208101845281549094168452600181015484830152600281015484840152825160608181018552600383015460ff80821684526101008083048216968501969096526201000090910481169583019590955285015260048101546080850152600581015460a0850152600681015460c085015260070154808316151560e08501528190049091161515908201525b92915050565b336000908152602081815260408083208484529091529020600781015460ff16610c1d5760405162461bcd60e51b815260040161063790612548565b80546001600160a01b03163314610c465760405162461bcd60e51b8152600401610637906124fc565b60078101805460ff19169055604051829033907f3ee9ca28321072883626157ba61d1c97dbb201875f5b65ab4d78f77fc316a31c90600090a35050565b336000908152602081815260408083208484529091529020600781015460ff16610cbf5760405162461bcd60e51b815260040161063790612548565b80546001600160a01b03163314610ce85760405162461bcd60e51b8152600401610637906124fc565b60078101805460ff19169055604051829033907f0f0575314e9a6c84f2bff03b4ceae4b5d4ca0fe92bff1acb153f13e5e36db71f90600090a35050565b6005546001600160a01b03163314610d4f5760405162461bcd60e51b815260040161063790612524565b6001600160a01b0386166000908152602081815260408083208884529091529020600781015460ff16610d945760405162461bcd60e51b815260040161063790612548565b80546001600160a01b03888116911614610dc05760405162461bcd60e51b815260040161063790612570565b6001600160a01b038716610dd760208701876122b8565b6001600160a01b031614610e2d5760405162461bcd60e51b815260206004820152601b60248201527f5065726d697373696f6e206163636f756e74206d69736d6174636800000000006044820152606401610637565b33610e3e60408701602088016122b8565b6001600160a01b031614610e875760405162461bcd60e51b815260206004820152601060248201526f0a6e0cadcc8cae440dad2e6dac2e8c6d60831b6044820152606401610637565b73036cbd53842c5426634e7929541ec2318f3dcf7e610eac60608701604088016122b8565b6001600160a01b031614610ef75760405162461bcd60e51b8152602060048201526012602482015271546f6b656e206d757374206265205553444360701b6044820152606401610637565b600754604051639e16b82f60e01b81526001600160a01b0390911690639e16b82f90610f2790889060040161270d565b602060405180830381865afa158015610f44573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f689190612720565b610fe55760075460405163b9ffc8e160e01b81526001600160a01b039091169063b9ffc8e190610fa09088908890889060040161273d565b6020604051808303816000875af1158015610fbf573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610fe39190612720565b505b60075460405163415a973560e01b81526001600160a01b039091169063415a973590611017908890869060040161276d565b600060405180830381600087803b15801561103157600080fd5b505af1158015611045573d6000803e3d6000fd5b5050505061094c81836001600160a01b0316611d9d565b33600090815260208181526040808320848452909152902060068101546110bb5760405162461bcd60e51b8152602060048201526013602482015272141b185b88191bd95cc81b9bdd08195e1a5cdd606a1b6044820152606401610637565b80546001600160a01b031633146110e45760405162461bcd60e51b8152600401610637906124fc565b600781015460ff161561112f5760405162461bcd60e51b8152602060048201526013602482015272506c616e20616c72656164792061637469766560681b6044820152606401610637565b60078101805460ff19166001179055604051829033907f64bf4125848d90010c24cc30cdbcb050b80009b859b208313f6259c7dc12d99490600090a35050565b6005546001600160a01b031633146111995760405162461bcd60e51b815260040161063790612524565b6001600160a01b0385166000908152602081815260408083208784529091529020600781015460ff166111de5760405162461bcd60e51b815260040161063790612548565b80546001600160a01b0387811691161461120a5760405162461bcd60e51b815260040161063790612570565b6007810154610100900460ff166112635760405162461bcd60e51b815260206004820152601760248201527f526562616c616e63696e67206e6f7420656e61626c65640000000000000000006044820152606401610637565b8161126e84866127c0565b61127891906127c0565b60ff1660641461129a5760405162461bcd60e51b8152600401610637906127d9565b60038101805460ff84811662010000810262ff000019888416610100810261ffff19909616948b169485179590951716179093556040805191825260208201929092529081019190915285906001600160a01b038816907f83f5707b16afbeb740e04e10842b33300d6ad2143d8b45de1919450747a0d16d906060015b60405180910390a3505050505050565b600085116113475760405162461bcd60e51b815260040161063790612810565b8161135284866127c0565b61135c91906127c0565b60ff1660641461137e5760405162461bcd60e51b8152600401610637906127d9565b33600090815260208181526040808320898452909152902060060154156113dd5760405162461bcd60e51b8152602060048201526013602482015272506c616e20616c72656164792065786973747360681b6044820152606401610637565b600060405180606001604052808660ff1681526020018560ff1681526020018460ff168152509050604051806101200160405280336001600160a01b031681526020018881526020018781526020018281526020016000815260200160008152602001428152602001600115158152602001831515815250600080336001600160a01b03166001600160a01b03168152602001908152602001600020600089815260200190815260200160002060008201518160000160006101000a8154816001600160a01b0302191690836001600160a01b03160217905550602082015181600101556040820151816002015560608201518160030160008201518160000160006101000a81548160ff021916908360ff16021790555060208201518160000160016101000a81548160ff021916908360ff16021790555060408201518160000160026101000a81548160ff021916908360ff16021790555050506080820151816004015560a0820151816005015560c0820151816006015560e08201518160070160006101000a81548160ff0219169083151502179055506101008201518160070160016101000a81548160ff02191690831515021790555090505060016000336001600160a01b03166001600160a01b0316815260200190815260200160002087908060018154018082558091505060019003906000526020600020016000909190919091505586336001600160a01b03167f1bd96959e90b965ecd58bac046f8d20f293cf639656f8987da258ccffc324361886040516109b091815260200190565b6001602052816000526040600020818154811061163f57600080fd5b90600052602060002001600091509150505481565b6001600160a01b0381166000908152600160209081526040918290208054835181840281018401909452808452606093928301828280156116b457602002820191906000526020600020905b8154815260200190600101908083116116a0575b50505050509050919050565b600084116116e05760405162461bcd60e51b815260040161063790612810565b806116eb83856127c0565b6116f591906127c0565b60ff166064146117175760405162461bcd60e51b8152600401610637906127d9565b33600090815260208181526040808320888452909152902060060154156117765760405162461bcd60e51b8152602060048201526013602482015272506c616e20616c72656164792065786973747360681b6044820152606401610637565b600060405180606001604052808560ff1681526020018460ff1681526020018360ff168152509050604051806101200160405280336001600160a01b03168152602001878152602001868152602001828152602001600081526020016000815260200142815260200160011515815260200160001515815250600080336001600160a01b03166001600160a01b03168152602001908152602001600020600088815260200190815260200160002060008201518160000160006101000a8154816001600160a01b0302191690836001600160a01b03160217905550602082015181600101556040820151816002015560608201518160030160008201518160000160006101000a81548160ff021916908360ff16021790555060208201518160000160016101000a81548160ff021916908360ff16021790555060408201518160000160026101000a81548160ff021916908360ff16021790555050506080820151816004015560a0820151816005015560c0820151816006015560e08201518160070160006101000a81548160ff0219169083151502179055506101008201518160070160016101000a81548160ff02191690831515021790555090505060016000336001600160a01b03166001600160a01b0316815260200190815260200160002086908060018154018082558091505060019003906000526020600020016000909190919091505585336001600160a01b03167f1bd96959e90b965ecd58bac046f8d20f293cf639656f8987da258ccffc3243618760405161131791815260200190565b6005546001600160a01b031633146119e75760405162461bcd60e51b815260040161063790612524565b6001600160a01b038116611a2f5760405162461bcd60e51b815260206004820152600f60248201526e496e76616c6964206164647265737360881b6044820152606401610637565b600580546001600160a01b0319166001600160a01b0392909216919091179055565b6005546001600160a01b03163314611a7b5760405162461bcd60e51b815260040161063790612524565b600780546001600160a01b0319166001600160a01b0392909216919091179055565b6003820154600090606490611ab59060ff1684612855565b611abf919061286c565b6003840154909150600090606490611adf90610100900460ff1685612855565b611ae9919061286c565b6003850154909150600090606490611b0a9062010000900460ff1686612855565b611b14919061286c565b90508215611be7576002546040516000916001600160a01b03169085908381818185875af1925050503d8060008114611b69576040519150601f19603f3d011682016040523d82523d6000602084013e611b6e565b606091505b5050905080611bb55760405162461bcd60e51b815260206004820152601360248201527210585d994819195c1bdcda5d0819985a5b1959606a1b6044820152606401610637565b6002546040518581526001600160a01b039091169060008051602061288f8339815191529060200160405180910390a2505b8115611cc2576003546040516000916001600160a01b03169084908381818185875af1925050503d8060008114611c3a576040519150601f19603f3d011682016040523d82523d6000602084013e611c3f565b606091505b5050905080611c905760405162461bcd60e51b815260206004820152601760248201527f436f6d706f756e64206465706f736974206661696c65640000000000000000006044820152606401610637565b6003546040518481526001600160a01b039091169060008051602061288f8339815191529060200160405180910390a2505b8015611d96576004546040516000916001600160a01b03169083908381818185875af1925050503d8060008114611d15576040519150601f19603f3d011682016040523d82523d6000602084013e611d1a565b606091505b5050905080611d645760405162461bcd60e51b8152602060048201526016602482015275155b9a5cddd85c0819195c1bdcda5d0819985a5b195960521b6044820152606401610637565b6004546040518381526001600160a01b039091169060008051602061288f8339815191529060200160405180910390a2505b5050505050565b6003820154600090606490611db59060ff1684612855565b611dbf919061286c565b6003840154909150600090606490611ddf90610100900460ff1685612855565b611de9919061286c565b6003850154909150600090606490611e0a9062010000900460ff1686612855565b611e14919061286c565b905073036cbd53842c5426634e7929541ec2318f3dcf7e8315611f1c5760025460405163a9059cbb60e01b81526001600160a01b039182166004820152602481018690529082169063a9059cbb906044016020604051808303816000875af1158015611e84573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611ea89190612720565b611eeb5760405162461bcd60e51b815260206004820152601460248201527310585d99481d1c985b9cd9995c8819985a5b195960621b6044820152606401610637565b6002546040518581526001600160a01b039091169060008051602061288f8339815191529060200160405180910390a25b82156120165760035460405163a9059cbb60e01b81526001600160a01b039182166004820152602481018590529082169063a9059cbb906044016020604051808303816000875af1158015611f75573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611f999190612720565b611fe55760405162461bcd60e51b815260206004820152601860248201527f436f6d706f756e64207472616e73666572206661696c656400000000000000006044820152606401610637565b6003546040518481526001600160a01b039091169060008051602061288f8339815191529060200160405180910390a25b81156120e1576004805460405163a9059cbb60e01b81526001600160a01b03918216928101929092526024820184905282169063a9059cbb906044016020604051808303816000875af1158015612071573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906120959190612720565b611d645760405162461bcd60e51b815260206004820152601760248201527f556e6973776170207472616e73666572206661696c65640000000000000000006044820152606401610637565b505050505050565b60405180610120016040528060006001600160a01b0316815260200160008152602001600081526020016121406040518060600160405280600060ff168152602001600060ff168152602001600060ff1681525090565b81526020016000815260200160008152602001600081526020016000151581526020016000151581525090565b801515811461217b57600080fd5b50565b6000806040838503121561219157600080fd5b8235915060208301356121a38161216d565b809150509250929050565b6001600160a01b038116811461217b57600080fd5b80356121ce816121ae565b919050565b60008060008060008060a087890312156121ec57600080fd5b86356121f7816121ae565b955060208701359450604087013567ffffffffffffffff8082111561221b57600080fd5b90880190610120828b03121561223057600080fd5b9094506060880135908082111561224657600080fd5b818901915089601f83011261225a57600080fd5b81358181111561226957600080fd5b8a602082850101111561227b57600080fd5b602083019550809450505050612293608088016121c3565b90509295509295509295565b6000602082840312156122b157600080fd5b5035919050565b6000602082840312156122ca57600080fd5b81356122d5816121ae565b9392505050565b600080604083850312156122ef57600080fd5b82356122fa816121ae565b946020939093013593505050565b81516001600160a01b0316815260208083015190820152604080830151908201526060808301516101608301916123619084018260ff815116825260ff602082015116602083015260ff60408201511660408301525050565b50608083015160c083015260a083015160e083015260c0830151610100818185015260e0850151915061239961012085018315159052565b84015180151561014085015290505092915050565b803560ff811681146121ce57600080fd5b600080600080600060a086880312156123d757600080fd5b85356123e2816121ae565b9450602086013593506123f7604087016123ae565b9250612405606087016123ae565b9150612413608087016123ae565b90509295509295909350565b60008060008060008060c0878903121561243857600080fd5b863595506020870135945061244f604088016123ae565b935061245d606088016123ae565b925061246b608088016123ae565b915060a087013561247b8161216d565b809150509295509295509295565b6020808252825182820181905260009190848201906040850190845b818110156124c1578351835292840192918401916001016124a5565b50909695505050505050565b600080600080600060a086880312156124e557600080fd5b85359450602086013593506123f7604087016123ae565b6020808252600e908201526d2737ba10383630b71037bbb732b960911b604082015260600190565b6020808252600a908201526927b7363c9037bbb732b960b11b604082015260600190565b6020808252600e908201526d27379030b1ba34bb3290383630b760911b604082015260600190565b6020808252600d908201526c0aae6cae440dad2e6dac2e8c6d609b1b604082015260600190565b803565ffffffffffff811681146121ce57600080fd5b6000808335601e198436030181126125c457600080fd5b830160208101925035905067ffffffffffffffff8111156125e457600080fd5b8036038213156125f357600080fd5b9250929050565b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b60006101208235612633816121ae565b6001600160a01b0316845261264a602084016121c3565b6001600160a01b03166020850152612664604084016121c3565b6001600160a01b0316604085015261267e606084016121c3565b6001600160a01b0316606085015261269860808401612597565b65ffffffffffff1660808501526126b160a08401612597565b65ffffffffffff1660a08501526126ca60c08401612597565b65ffffffffffff1660c085015260e083810135908501526101006126f0818501856125ad565b838388015261270284880182846125fa565b979650505050505050565b6020815260006122d56020830184612623565b60006020828403121561273257600080fd5b81516122d58161216d565b6040815260006127506040830186612623565b82810360208401526127638185876125fa565b9695505050505050565b6040815260006127806040830185612623565b905060018060a01b03831660208301529392505050565b634e487b7160e01b600052601160045260246000fd5b80820180821115610bdb57610bdb612797565b60ff8181168382160190811115610bdb57610bdb612797565b60208082526018908201527f50657263656e7473206d7573742073756d20746f203130300000000000000000604082015260600190565b60208082526025908201527f4d6f6e74686c7920616d6f756e74206d75737420626520677265617465722074604082015264068616e20360dc1b606082015260800190565b8082028115828204841417610bdb57610bdb612797565b60008261288957634e487b7160e01b600052601260045260246000fd5b50049056fe870f86672db2c7b197484fa0218e97fe38eb7c89fd39ed2c4c910734c66182f8a2646970667358221220330c6c6a4c350c6423689109049691c3a8c0cc44afcc2e2551923a58f0b62f4464736f6c63430008140033",
  "deployedBytecode": "0x60806040526004361061016a5760003560e01c806389a30271116100d1578063c0edf9a61161008a578063f1e4d3b211610064578063f1e4d3b21461055c578063f2fde38b1461057c578063f457ae191461059c578063f69e2046146105bc57600080fd5b8063c0edf9a6146104e1578063cff979a614610501578063e4b605401461052f57600080fd5b806389a302711461041957806389ce731a146104415780638da5cb5b1461046157806390840cd514610481578063b35876e7146104a1578063bc1ad7a4146104c157600080fd5b80636752902e116101235780636752902e1461025057806368c2fe991461027057806380d6664c1461029d578063819faf7b146102bd578063831820f0146102dd57806383589fde146103f957600080fd5b8063011e1167146101765780632681f7e4146101bb57806327adf703146101db57806336de6cdf146101fb57806352cd407f1461021d578063538389221461023d57600080fd5b3661017157005b600080fd5b34801561018257600080fd5b5061019e73eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee81565b6040516001600160a01b0390911681526020015b60405180910390f35b3480156101c757600080fd5b5060045461019e906001600160a01b031681565b3480156101e757600080fd5b5060065461019e906001600160a01b031681565b34801561020757600080fd5b5061021b61021636600461217e565b6105dc565b005b34801561022957600080fd5b5061021b6102383660046121d3565b610685565b61021b61024b36600461229f565b6109c1565b34801561025c57600080fd5b5061021b61026b3660046122b8565b610aa1565b34801561027c57600080fd5b5061029061028b3660046122dc565b610b1d565b6040516101b29190612308565b3480156102a957600080fd5b5061021b6102b836600461229f565b610be1565b3480156102c957600080fd5b5060025461019e906001600160a01b031681565b3480156102e957600080fd5b506103856102f83660046122dc565b60006020818152928152604080822084529181528190208054600182015460028301548451606081018652600385015460ff8082168352610100808304821699840199909952620100009091048116968201969096526004850154600586015460068701546007909701546001600160a01b03909616989497939692959194909382811692919091041689565b604080516001600160a01b03909a168a526020808b019990995289810197909752855160ff90811660608b015297860151881660808a0152949095015190951660a087015260c086019190915260e085015261010084019290925215156101208301521515610140820152610160016101b2565b34801561040557600080fd5b5061021b61041436600461229f565b610c83565b34801561042557600080fd5b5061019e73036cbd53842c5426634e7929541ec2318f3dcf7e81565b34801561044d57600080fd5b5061021b61045c3660046121d3565b610d25565b34801561046d57600080fd5b5060055461019e906001600160a01b031681565b34801561048d57600080fd5b5060075461019e906001600160a01b031681565b3480156104ad57600080fd5b5061021b6104bc36600461229f565b61105c565b3480156104cd57600080fd5b5061021b6104dc3660046123bf565b61116f565b3480156104ed57600080fd5b5061021b6104fc36600461241f565b611327565b34801561050d57600080fd5b5061052161051c3660046122dc565b611623565b6040519081526020016101b2565b34801561053b57600080fd5b5061054f61054a3660046122b8565b611654565b6040516101b29190612489565b34801561056857600080fd5b5061021b6105773660046124cd565b6116c0565b34801561058857600080fd5b5061021b6105973660046122b8565b6119bd565b3480156105a857600080fd5b5061021b6105b73660046122b8565b611a51565b3480156105c857600080fd5b5060035461019e906001600160a01b031681565b33600090815260208181526040808320858452909152902060068101546106405760405162461bcd60e51b8152602060048201526013602482015272141b185b88191bd95cc81b9bdd08195e1a5cdd606a1b60448201526064015b60405180910390fd5b80546001600160a01b031633146106695760405162461bcd60e51b8152600401610637906124fc565b60070180549115156101000261ff001990921691909117905550565b6005546001600160a01b031633146106af5760405162461bcd60e51b815260040161063790612524565b6001600160a01b0386166000908152602081815260408083208884529091529020600781015460ff166106f45760405162461bcd60e51b815260040161063790612548565b80546001600160a01b038881169116146107205760405162461bcd60e51b815260040161063790612570565b6001600160a01b03871661073760208701876122b8565b6001600160a01b03161461078d5760405162461bcd60e51b815260206004820152601b60248201527f5065726d697373696f6e206163636f756e74206d69736d6174636800000000006044820152606401610637565b3361079e60408701602088016122b8565b6001600160a01b0316146107e75760405162461bcd60e51b815260206004820152601060248201526f0a6e0cadcc8cae440dad2e6dac2e8c6d60831b6044820152606401610637565b600754604051639e16b82f60e01b81526001600160a01b0390911690639e16b82f9061081790889060040161270d565b602060405180830381865afa158015610834573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108589190612720565b6108d55760075460405163b9ffc8e160e01b81526001600160a01b039091169063b9ffc8e1906108909088908890889060040161273d565b6020604051808303816000875af11580156108af573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108d39190612720565b505b60075460405163415a973560e01b81526001600160a01b039091169063415a973590610907908890869060040161276d565b600060405180830381600087803b15801561092157600080fd5b505af1158015610935573d6000803e3d6000fd5b5050505061094c81836001600160a01b0316611a9d565b816001600160a01b031681600401600082825461096991906127ad565b90915550504260058201556040516001600160a01b0383811682528791908916907fcf75a80a22cde0edcefe708f860e644c73eb8921aac7890f3bec010eef965f64906020015b60405180910390a350505050505050565b336000908152602081815260408083208484529091529020600781015460ff166109fd5760405162461bcd60e51b815260040161063790612548565b60003411610a3d5760405162461bcd60e51b815260206004820152600d60248201526c09aeae6e840e6cadcc8408aa89609b1b6044820152606401610637565b610a478134611a9d565b34816004016000828254610a5b91906127ad565b9091555050426005820155604051348152829033907fcf75a80a22cde0edcefe708f860e644c73eb8921aac7890f3bec010eef965f649060200160405180910390a35050565b6005546001600160a01b03163314610acb5760405162461bcd60e51b815260040161063790612524565b600680546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8afc512c0bdd152ae40fb1548f4014dfaf323edbd91e8397519d5d586c9586bc90600090a35050565b610b256120e9565b506001600160a01b0380831660009081526020818152604080832085845282529182902082516101208101845281549094168452600181015484830152600281015484840152825160608181018552600383015460ff80821684526101008083048216968501969096526201000090910481169583019590955285015260048101546080850152600581015460a0850152600681015460c085015260070154808316151560e08501528190049091161515908201525b92915050565b336000908152602081815260408083208484529091529020600781015460ff16610c1d5760405162461bcd60e51b815260040161063790612548565b80546001600160a01b03163314610c465760405162461bcd60e51b8152600401610637906124fc565b60078101805460ff19169055604051829033907f3ee9ca28321072883626157ba61d1c97dbb201875f5b65ab4d78f77fc316a31c90600090a35050565b336000908152602081815260408083208484529091529020600781015460ff16610cbf5760405162461bcd60e51b815260040161063790612548565b80546001600160a01b03163314610ce85760405162461bcd60e51b8152600401610637906124fc565b60078101805460ff19169055604051829033907f0f0575314e9a6c84f2bff03b4ceae4b5d4ca0fe92bff1acb153f13e5e36db71f90600090a35050565b6005546001600160a01b03163314610d4f5760405162461bcd60e51b815260040161063790612524565b6001600160a01b0386166000908152602081815260408083208884529091529020600781015460ff16610d945760405162461bcd60e51b815260040161063790612548565b80546001600160a01b03888116911614610dc05760405162461bcd60e51b815260040161063790612570565b6001600160a01b038716610dd760208701876122b8565b6001600160a01b031614610e2d5760405162461bcd60e51b815260206004820152601b60248201527f5065726d697373696f6e206163636f756e74206d69736d6174636800000000006044820152606401610637565b33610e3e60408701602088016122b8565b6001600160a01b031614610e875760405162461bcd60e51b815260206004820152601060248201526f0a6e0cadcc8cae440dad2e6dac2e8c6d60831b6044820152606401610637565b73036cbd53842c5426634e7929541ec2318f3dcf7e610eac60608701604088016122b8565b6001600160a01b031614610ef75760405162461bcd60e51b8152602060048201526012602482015271546f6b656e206d757374206265205553444360701b6044820152606401610637565b600754604051639e16b82f60e01b81526001600160a01b0390911690639e16b82f90610f2790889060040161270d565b602060405180830381865afa158015610f44573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f689190612720565b610fe55760075460405163b9ffc8e160e01b81526001600160a01b039091169063b9ffc8e190610fa09088908890889060040161273d565b6020604051808303816000875af1158015610fbf573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610fe39190612720565b505b60075460405163415a973560e01b81526001600160a01b039091169063415a973590611017908890869060040161276d565b600060405180830381600087803b15801561103157600080fd5b505af1158015611045573d6000803e3d6000fd5b5050505061094c81836001600160a01b0316611d9d565b33600090815260208181526040808320848452909152902060068101546110bb5760405162461bcd60e51b8152602060048201526013602482015272141b185b88191bd95cc81b9bdd08195e1a5cdd606a1b6044820152606401610637565b80546001600160a01b031633146110e45760405162461bcd60e51b8152600401610637906124fc565b600781015460ff161561112f5760405162461bcd60e51b8152602060048201526013602482015272506c616e20616c72656164792061637469766560681b6044820152606401610637565b60078101805460ff19166001179055604051829033907f64bf4125848d90010c24cc30cdbcb050b80009b859b208313f6259c7dc12d99490600090a35050565b6005546001600160a01b031633146111995760405162461bcd60e51b815260040161063790612524565b6001600160a01b0385166000908152602081815260408083208784529091529020600781015460ff166111de5760405162461bcd60e51b815260040161063790612548565b80546001600160a01b0387811691161461120a5760405162461bcd60e51b815260040161063790612570565b6007810154610100900460ff166112635760405162461bcd60e51b815260206004820152601760248201527f526562616c616e63696e67206e6f7420656e61626c65640000000000000000006044820152606401610637565b8161126e84866127c0565b61127891906127c0565b60ff1660641461129a5760405162461bcd60e51b8152600401610637906127d9565b60038101805460ff84811662010000810262ff000019888416610100810261ffff19909616948b169485179590951716179093556040805191825260208201929092529081019190915285906001600160a01b038816907f83f5707b16afbeb740e04e10842b33300d6ad2143d8b45de1919450747a0d16d906060015b60405180910390a3505050505050565b600085116113475760405162461bcd60e51b815260040161063790612810565b8161135284866127c0565b61135c91906127c0565b60ff1660641461137e5760405162461bcd60e51b8152600401610637906127d9565b33600090815260208181526040808320898452909152902060060154156113dd5760405162461bcd60e51b8152602060048201526013602482015272506c616e20616c72656164792065786973747360681b6044820152606401610637565b600060405180606001604052808660ff1681526020018560ff1681526020018460ff168152509050604051806101200160405280336001600160a01b031681526020018881526020018781526020018281526020016000815260200160008152602001428152602001600115158152602001831515815250600080336001600160a01b03166001600160a01b03168152602001908152602001600020600089815260200190815260200160002060008201518160000160006101000a8154816001600160a01b0302191690836001600160a01b03160217905550602082015181600101556040820151816002015560608201518160030160008201518160000160006101000a81548160ff021916908360ff16021790555060208201518160000160016101000a81548160ff021916908360ff16021790555060408201518160000160026101000a81548160ff021916908360ff16021790555050506080820151816004015560a0820151816005015560c0820151816006015560e08201518160070160006101000a81548160ff0219169083151502179055506101008201518160070160016101000a81548160ff02191690831515021790555090505060016000336001600160a01b03166001600160a01b0316815260200190815260200160002087908060018154018082558091505060019003906000526020600020016000909190919091505586336001600160a01b03167f1bd96959e90b965ecd58bac046f8d20f293cf639656f8987da258ccffc324361886040516109b091815260200190565b6001602052816000526040600020818154811061163f57600080fd5b90600052602060002001600091509150505481565b6001600160a01b0381166000908152600160209081526040918290208054835181840281018401909452808452606093928301828280156116b457602002820191906000526020600020905b8154815260200190600101908083116116a0575b50505050509050919050565b600084116116e05760405162461bcd60e51b815260040161063790612810565b806116eb83856127c0565b6116f591906127c0565b60ff166064146117175760405162461bcd60e51b8152600401610637906127d9565b33600090815260208181526040808320888452909152902060060154156117765760405162461bcd60e51b8152602060048201526013602482015272506c616e20616c72656164792065786973747360681b6044820152606401610637565b600060405180606001604052808560ff1681526020018460ff1681526020018360ff168152509050604051806101200160405280336001600160a01b03168152602001878152602001868152602001828152602001600081526020016000815260200142815260200160011515815260200160001515815250600080336001600160a01b03166001600160a01b03168152602001908152602001600020600088815260200190815260200160002060008201518160000160006101000a8154816001600160a01b0302191690836001600160a01b03160217905550602082015181600101556040820151816002015560608201518160030160008201518160000160006101000a81548160ff021916908360ff16021790555060208201518160000160016101000a81548160ff021916908360ff16021790555060408201518160000160026101000a81548160ff021916908360ff16021790555050506080820151816004015560a0820151816005015560c0820151816006015560e08201518160070160006101000a81548160ff0219169083151502179055506101008201518160070160016101000a81548160ff02191690831515021790555090505060016000336001600160a01b03166001600160a01b0316815260200190815260200160002086908060018154018082558091505060019003906000526020600020016000909190919091505585336001600160a01b03167f1bd96959e90b965ecd58bac046f8d20f293cf639656f8987da258ccffc3243618760405161131791815260200190565b6005546001600160a01b031633146119e75760405162461bcd60e51b815260040161063790612524565b6001600160a01b038116611a2f5760405162461bcd60e51b815260206004820152600f60248201526e496e76616c6964206164647265737360881b6044820152606401610637565b600580546001600160a01b0319166001600160a01b0392909216919091179055565b6005546001600160a01b03163314611a7b5760405162461bcd60e51b815260040161063790612524565b600780546001600160a01b0319166001600160a01b0392909216919091179055565b6003820154600090606490611ab59060ff1684612855565b611abf919061286c565b6003840154909150600090606490611adf90610100900460ff1685612855565b611ae9919061286c565b6003850154909150600090606490611b0a9062010000900460ff1686612855565b611b14919061286c565b90508215611be7576002546040516000916001600160a01b03169085908381818185875af1925050503d8060008114611b69576040519150601f19603f3d011682016040523d82523d6000602084013e611b6e565b606091505b5050905080611bb55760405162461bcd60e51b815260206004820152601360248201527210585d994819195c1bdcda5d0819985a5b1959606a1b6044820152606401610637565b6002546040518581526001600160a01b039091169060008051602061288f8339815191529060200160405180910390a2505b8115611cc2576003546040516000916001600160a01b03169084908381818185875af1925050503d8060008114611c3a576040519150601f19603f3d011682016040523d82523d6000602084013e611c3f565b606091505b5050905080611c905760405162461bcd60e51b815260206004820152601760248201527f436f6d706f756e64206465706f736974206661696c65640000000000000000006044820152606401610637565b6003546040518481526001600160a01b039091169060008051602061288f8339815191529060200160405180910390a2505b8015611d96576004546040516000916001600160a01b03169083908381818185875af1925050503d8060008114611d15576040519150601f19603f3d011682016040523d82523d6000602084013e611d1a565b606091505b5050905080611d645760405162461bcd60e51b8152602060048201526016602482015275155b9a5cddd85c0819195c1bdcda5d0819985a5b195960521b6044820152606401610637565b6004546040518381526001600160a01b039091169060008051602061288f8339815191529060200160405180910390a2505b5050505050565b6003820154600090606490611db59060ff1684612855565b611dbf919061286c565b6003840154909150600090606490611ddf90610100900460ff1685612855565b611de9919061286c565b6003850154909150600090606490611e0a9062010000900460ff1686612855565b611e14919061286c565b905073036cbd53842c5426634e7929541ec2318f3dcf7e8315611f1c5760025460405163a9059cbb60e01b81526001600160a01b039182166004820152602481018690529082169063a9059cbb906044016020604051808303816000875af1158015611e84573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611ea89190612720565b611eeb5760405162461bcd60e51b815260206004820152601460248201527310585d99481d1c985b9cd9995c8819985a5b195960621b6044820152606401610637565b6002546040518581526001600160a01b039091169060008051602061288f8339815191529060200160405180910390a25b82156120165760035460405163a9059cbb60e01b81526001600160a01b039182166004820152602481018590529082169063a9059cbb906044016020604051808303816000875af1158015611f75573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611f999190612720565b611fe55760405162461bcd60e51b815260206004820152601860248201527f436f6d706f756e64207472616e73666572206661696c656400000000000000006044820152606401610637565b6003546040518481526001600160a01b039091169060008051602061288f8339815191529060200160405180910390a25b81156120e1576004805460405163a9059cbb60e01b81526001600160a01b03918216928101929092526024820184905282169063a9059cbb906044016020604051808303816000875af1158015612071573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906120959190612720565b611d645760405162461bcd60e51b815260206004820152601760248201527f556e6973776170207472616e73666572206661696c65640000000000000000006044820152606401610637565b505050505050565b60405180610120016040528060006001600160a01b0316815260200160008152602001600081526020016121406040518060600160405280600060ff168152602001600060ff168152602001600060ff1681525090565b81526020016000815260200160008152602001600081526020016000151581526020016000151581525090565b801515811461217b57600080fd5b50565b6000806040838503121561219157600080fd5b8235915060208301356121a38161216d565b809150509250929050565b6001600160a01b038116811461217b57600080fd5b80356121ce816121ae565b919050565b60008060008060008060a087890312156121ec57600080fd5b86356121f7816121ae565b955060208701359450604087013567ffffffffffffffff8082111561221b57600080fd5b90880190610120828b03121561223057600080fd5b9094506060880135908082111561224657600080fd5b818901915089601f83011261225a57600080fd5b81358181111561226957600080fd5b8a602082850101111561227b57600080fd5b602083019550809450505050612293608088016121c3565b90509295509295509295565b6000602082840312156122b157600080fd5b5035919050565b6000602082840312156122ca57600080fd5b81356122d5816121ae565b9392505050565b600080604083850312156122ef57600080fd5b82356122fa816121ae565b946020939093013593505050565b81516001600160a01b0316815260208083015190820152604080830151908201526060808301516101608301916123619084018260ff815116825260ff602082015116602083015260ff60408201511660408301525050565b50608083015160c083015260a083015160e083015260c0830151610100818185015260e0850151915061239961012085018315159052565b84015180151561014085015290505092915050565b803560ff811681146121ce57600080fd5b600080600080600060a086880312156123d757600080fd5b85356123e2816121ae565b9450602086013593506123f7604087016123ae565b9250612405606087016123ae565b9150612413608087016123ae565b90509295509295909350565b60008060008060008060c0878903121561243857600080fd5b863595506020870135945061244f604088016123ae565b935061245d606088016123ae565b925061246b608088016123ae565b915060a087013561247b8161216d565b809150509295509295509295565b6020808252825182820181905260009190848201906040850190845b818110156124c1578351835292840192918401916001016124a5565b50909695505050505050565b600080600080600060a086880312156124e557600080fd5b85359450602086013593506123f7604087016123ae565b6020808252600e908201526d2737ba10383630b71037bbb732b960911b604082015260600190565b6020808252600a908201526927b7363c9037bbb732b960b11b604082015260600190565b6020808252600e908201526d27379030b1ba34bb3290383630b760911b604082015260600190565b6020808252600d908201526c0aae6cae440dad2e6dac2e8c6d609b1b604082015260600190565b803565ffffffffffff811681146121ce57600080fd5b6000808335601e198436030181126125c457600080fd5b830160208101925035905067ffffffffffffffff8111156125e457600080fd5b8036038213156125f357600080fd5b9250929050565b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b60006101208235612633816121ae565b6001600160a01b0316845261264a602084016121c3565b6001600160a01b03166020850152612664604084016121c3565b6001600160a01b0316604085015261267e606084016121c3565b6001600160a01b0316606085015261269860808401612597565b65ffffffffffff1660808501526126b160a08401612597565b65ffffffffffff1660a08501526126ca60c08401612597565b65ffffffffffff1660c085015260e083810135908501526101006126f0818501856125ad565b838388015261270284880182846125fa565b979650505050505050565b6020815260006122d56020830184612623565b60006020828403121561273257600080fd5b81516122d58161216d565b6040815260006127506040830186612623565b82810360208401526127638185876125fa565b9695505050505050565b6040815260006127806040830185612623565b905060018060a01b03831660208301529392505050565b634e487b7160e01b600052601160045260246000fd5b80820180821115610bdb57610bdb612797565b60ff8181168382160190811115610bdb57610bdb612797565b60208082526018908201527f50657263656e7473206d7573742073756d20746f203130300000000000000000604082015260600190565b60208082526025908201527f4d6f6e74686c7920616d6f756e74206d75737420626520677265617465722074604082015264068616e20360dc1b606082015260800190565b8082028115828204841417610bdb57610bdb612797565b60008261288957634e487b7160e01b600052601260045260246000fd5b50049056fe870f86672db2c7b197484fa0218e97fe38eb7c89fd39ed2c4c910734c66182f8a2646970667358221220330c6c6a4c350c6423689109049691c3a8c0cc44afcc2e2551923a58f0b62f4464736f6c63430008140033",
  "devdoc": {
    "details": "Uses Coinbase's SpendPermissionManager for automated USDC deposits      SIP investments use USDC, Agent payments use ETH",
    "kind": "dev",
    "methods": {
      "createSIPPlan(uint256,uint256,uint8,uint8,uint8,bool)": {
        "details": "This is called by the frontend when user confirms their plan",
        "params": {
          "aavePercent": "Percentage allocation to Aave",
          "compoundPercent": "Percentage allocation to Compound",
          "enableRebalancing": "Whether to enable AI rebalancing",
          "monthlyAmount": "Monthly investment amount in USDC (6 decimals)",
          "planId": "The database plan ID for reference",
          "uniswapPercent": "Percentage allocation to Uniswap"
        }
      },
      "depositDirect(uint256)": {
        "details": "Alternative method for direct deposits without spend permissions",
        "params": {
          "planId": "The plan ID to fund"
        }
      },
      "executeDeposit(address,uint256,(address,address,address,uint160,uint48,uint48,uint48,uint256,bytes),bytes,uint160)": {
        "details": "Called by the server wallet (spender) using the stored spend permission"
      },
      "executeDepositUSDC(address,uint256,(address,address,address,uint160,uint48,uint48,uint48,uint256,bytes),bytes,uint160)": {
        "details": "Called by the server wallet (spender) using the stored spend permission",
        "params": {
          "amount": "Amount to deposit in this execution (USDC, 6 decimals)",
          "planId": "The plan ID to execute",
          "signature": "The user's signature for the spend permission",
          "spendPermission": "The spend permission struct (must be for USDC token)",
          "user": "The user whose SIP is being executed"
        }
      },
      "rebalance(address,uint256,uint8,uint8,uint8)": {
        "details": "Called by the server after AI generates new strategy",
        "params": {
          "newAavePercent": "New percentage allocation to Aave",
          "newCompoundPercent": "New percentage allocation to Compound",
          "newUniswapPercent": "New percentage allocation to Uniswap",
          "planId": "The plan ID to rebalance",
          "user": "The user whose plan is being rebalanced"
        }
      },
      "setRebalancing(uint256,bool)": {
        "params": {
          "enabled": "Whether to enable rebalancing",
          "planId": "The plan ID"
        }
      }
    },
    "title": "LumoContract",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "cancelPlan(uint256)": {
        "notice": "Cancel a SIP plan"
      },
      "createSIPPlan(uint256,uint256,uint8,uint8,uint8)": {
        "notice": "Create a new SIP plan (backwards compatible - no rebalancing param)"
      },
      "createSIPPlan(uint256,uint256,uint8,uint8,uint8,bool)": {
        "notice": "Create a new SIP plan for a user"
      },
      "depositDirect(uint256)": {
        "notice": "Execute a direct ETH deposit (for users who send ETH directly)"
      },
      "executeDeposit(address,uint256,(address,address,address,uint160,uint48,uint48,uint48,uint256,bytes),bytes,uint160)": {
        "notice": "Execute a deposit for a user's SIP plan using spend permission (backwards compatible - ETH)"
      },
      "executeDepositUSDC(address,uint256,(address,address,address,uint160,uint48,uint48,uint48,uint256,bytes),bytes,uint160)": {
        "notice": "Execute a USDC deposit for a user's SIP plan using spend permission"
      },
      "getPlan(address,uint256)": {
        "notice": "Get a user's SIP plan"
      },
      "getUserPlanIds(address)": {
        "notice": "Get all plan IDs for a user"
      },
      "pausePlan(uint256)": {
        "notice": "Pause a SIP plan"
      },
      "rebalance(address,uint256,uint8,uint8,uint8)": {
        "notice": "Rebalance a user's SIP plan with new strategy allocation"
      },
      "resumePlan(uint256)": {
        "notice": "Resume a paused SIP plan"
      },
      "setExpertAgentAddress(address)": {
        "notice": "Set the expert agent address for AI payments"
      },
      "setRebalancing(uint256,bool)": {
        "notice": "Toggle rebalancing for a plan"
      },
      "setSpendPermissionManager(address)": {
        "notice": "Update the SpendPermissionManager address"
      },
      "transferOwnership(address)": {
        "notice": "Transfer ownership"
      }
    },
    "notice": "Main contract for Lumo SIP (Systematic Investment Plan) DeFAI automation",
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 75,
        "contract": "contracts/LumoContract.sol:LumoContract",
        "label": "userPlans",
        "offset": 0,
        "slot": "0",
        "type": "t_mapping(t_address,t_mapping(t_uint256,t_struct(SIPPlan)68_storage))"
      },
      {
        "astId": 80,
        "contract": "contracts/LumoContract.sol:LumoContract",
        "label": "userPlanIds",
        "offset": 0,
        "slot": "1",
        "type": "t_mapping(t_address,t_array(t_uint256)dyn_storage)"
      },
      {
        "astId": 82,
        "contract": "contracts/LumoContract.sol:LumoContract",
        "label": "aave",
        "offset": 0,
        "slot": "2",
        "type": "t_address"
      },
      {
        "astId": 84,
        "contract": "contracts/LumoContract.sol:LumoContract",
        "label": "compound",
        "offset": 0,
        "slot": "3",
        "type": "t_address"
      },
      {
        "astId": 86,
        "contract": "contracts/LumoContract.sol:LumoContract",
        "label": "uniswap",
        "offset": 0,
        "slot": "4",
        "type": "t_address"
      },
      {
        "astId": 88,
        "contract": "contracts/LumoContract.sol:LumoContract",
        "label": "owner",
        "offset": 0,
        "slot": "5",
        "type": "t_address"
      },
      {
        "astId": 96,
        "contract": "contracts/LumoContract.sol:LumoContract",
        "label": "expertAgentAddress",
        "offset": 0,
        "slot": "6",
        "type": "t_address"
      },
      {
        "astId": 99,
        "contract": "contracts/LumoContract.sol:LumoContract",
        "label": "spendPermissionManager",
        "offset": 0,
        "slot": "7",
        "type": "t_contract(ISpendPermissionManager)1340"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_array(t_uint256)dyn_storage": {
        "base": "t_uint256",
        "encoding": "dynamic_array",
        "label": "uint256[]",
        "numberOfBytes": "32"
      },
      "t_bool": {
        "encoding": "inplace",
        "label": "bool",
        "numberOfBytes": "1"
      },
      "t_contract(ISpendPermissionManager)1340": {
        "encoding": "inplace",
        "label": "contract ISpendPermissionManager",
        "numberOfBytes": "20"
      },
      "t_mapping(t_address,t_array(t_uint256)dyn_storage)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => uint256[])",
        "numberOfBytes": "32",
        "value": "t_array(t_uint256)dyn_storage"
      },
      "t_mapping(t_address,t_mapping(t_uint256,t_struct(SIPPlan)68_storage))": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => mapping(uint256 => struct LumoContract.SIPPlan))",
        "numberOfBytes": "32",
        "value": "t_mapping(t_uint256,t_struct(SIPPlan)68_storage)"
      },
      "t_mapping(t_uint256,t_struct(SIPPlan)68_storage)": {
        "encoding": "mapping",
        "key": "t_uint256",
        "label": "mapping(uint256 => struct LumoContract.SIPPlan)",
        "numberOfBytes": "32",
        "value": "t_struct(SIPPlan)68_storage"
      },
      "t_struct(SIPPlan)68_storage": {
        "encoding": "inplace",
        "label": "struct LumoContract.SIPPlan",
        "members": [
          {
            "astId": 50,
            "contract": "contracts/LumoContract.sol:LumoContract",
            "label": "user",
            "offset": 0,
            "slot": "0",
            "type": "t_address"
          },
          {
            "astId": 52,
            "contract": "contracts/LumoContract.sol:LumoContract",
            "label": "planId",
            "offset": 0,
            "slot": "1",
            "type": "t_uint256"
          },
          {
            "astId": 54,
            "contract": "contracts/LumoContract.sol:LumoContract",
            "label": "monthlyAmount",
            "offset": 0,
            "slot": "2",
            "type": "t_uint256"
          },
          {
            "astId": 57,
            "contract": "contracts/LumoContract.sol:LumoContract",
            "label": "strategy",
            "offset": 0,
            "slot": "3",
            "type": "t_struct(Strategy)48_storage"
          },
          {
            "astId": 59,
            "contract": "contracts/LumoContract.sol:LumoContract",
            "label": "totalDeposited",
            "offset": 0,
            "slot": "4",
            "type": "t_uint256"
          },
          {
            "astId": 61,
            "contract": "contracts/LumoContract.sol:LumoContract",
            "label": "lastDepositTime",
            "offset": 0,
            "slot": "5",
            "type": "t_uint256"
          },
          {
            "astId": 63,
            "contract": "contracts/LumoContract.sol:LumoContract",
            "label": "createdAt",
            "offset": 0,
            "slot": "6",
            "type": "t_uint256"
          },
          {
            "astId": 65,
            "contract": "contracts/LumoContract.sol:LumoContract",
            "label": "active",
            "offset": 0,
            "slot": "7",
            "type": "t_bool"
          },
          {
            "astId": 67,
            "contract": "contracts/LumoContract.sol:LumoContract",
            "label": "rebalancingEnabled",
            "offset": 1,
            "slot": "7",
            "type": "t_bool"
          }
        ],
        "numberOfBytes": "256"
      },
      "t_struct(Strategy)48_storage": {
        "encoding": "inplace",
        "label": "struct LumoContract.Strategy",
        "members": [
          {
            "astId": 43,
            "contract": "contracts/LumoContract.sol:LumoContract",
            "label": "aavePercent",
            "offset": 0,
            "slot": "0",
            "type": "t_uint8"
          },
          {
            "astId": 45,
            "contract": "contracts/LumoContract.sol:LumoContract",
            "label": "compoundPercent",
            "offset": 1,
            "slot": "0",
            "type": "t_uint8"
          },
          {
            "astId": 47,
            "contract": "contracts/LumoContract.sol:LumoContract",
            "label": "uniswapPercent",
            "offset": 2,
            "slot": "0",
            "type": "t_uint8"
          }
        ],
        "numberOfBytes": "32"
      },
      "t_uint256": {
        "encoding": "inplace",
        "label": "uint256",
        "numberOfBytes": "32"
      },
      "t_uint8": {
        "encoding": "inplace",
        "label": "uint8",
        "numberOfBytes": "1"
      }
    }
  }
}